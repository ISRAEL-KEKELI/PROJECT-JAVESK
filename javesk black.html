<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>Javesk ‚Äì Mobile-first micro-courses for Ghanaian youth</title>
  <meta name="description" content="Search micro-courses, learn offline, earn certificates, access mentorship and job placement resources." />
  <style>
    :root{
      --bg:#0b0c10;
      --card:#13141a;
      --muted:#8b8d97;
      --text:#f5f6fa;
      --accent:#2dd4bf;
      --accent2:#60a5fa;
      --danger:#ef4444;
      --warning:#f59e0b;
      --success:#22c55e;
      --chip:#1d1f27;
      --border:#21222c;
      --shadow:0 8px 24px rgba(0,0,0,.35);
      --radius:14px;
      --touch:18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji", "Segoe UI Symbol";
      background:var(--bg);
      color:var(--text);
    }
    .app{
      display:flex;
      flex-direction:column;
      height:100%;
      max-width:720px;
      margin:0 auto;
    }
    header{
      padding:16px 16px 8px;
      border-bottom:1px solid var(--border);
      position:sticky; top:0; background:var(--bg); z-index:10;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
    }
    .brand-logo{
      width:36px; height:36px; border-radius:10px; background:linear-gradient(135deg,var(--accent),var(--accent2));
      display:flex; align-items:center; justify-content:center; font-weight:700; color:#061b16;
      box-shadow:var(--shadow);
    }
    .brand-name{font-weight:700; letter-spacing:.3px}
    .search{
      margin-top:12px; display:flex; gap:8px;
    }
    .search input{
      flex:1; padding:12px; border-radius:12px; border:1px solid var(--border); background:var(--card); color:var(--text);
      font-size:16px;
    }
    .search button{
      padding:12px 14px; border-radius:12px; border:1px solid var(--border); background:var(--chip); color:var(--text); font-weight:600;
    }
    .filters{display:flex; gap:8px; overflow:auto; padding:10px 0}
    .chip{
      padding:8px 12px; border-radius:999px; background:var(--chip);
      border:1px solid var(--border); color:var(--text); white-space:nowrap; font-size:14px;
    }
    .chip.active{background:var(--accent); color:#062521; border-color:transparent}

    main{flex:1; overflow:auto; padding:12px 16px 90px}
    .section-title{font-size:16px; color:var(--muted); margin:8px 0 10px}

    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap:12px;
    }
    @media(min-width:500px){
      .grid{grid-template-columns: repeat(2, 1fr);}
    }
    .card{
      background:var(--card); border:1px solid var(--border); border-radius:var(--radius); overflow:hidden;
      box-shadow:var(--shadow);
    }
    .thumb{
      height:120px; background:#0f1117; display:flex; align-items:center; justify-content:center; position:relative;
    }
    .thumb img{width:100%; height:100%; object-fit:cover}
    .badge{
      position:absolute; bottom:8px; left:8px; background:var(--chip); border:1px solid var(--border); color:var(--text);
      padding:6px 10px; border-radius:999px; font-size:12px;
    }
    .card-body{padding:12px}
    .title{font-weight:700; font-size:15px; line-height:1.3}
    .meta{margin-top:6px; font-size:13px; color:var(--muted)}
    .meta span{margin-right:8px}
    .tags{margin-top:8px; display:flex; flex-wrap:wrap; gap:6px}
    .tag{font-size:12px; padding:6px 8px; border-radius:999px; background:#0e1015; border:1px solid var(--border); color:var(--text)}
    .card-actions{margin-top:10px; display:flex; gap:8px}
    .btn{
      flex:1; padding:10px; border-radius:12px; border:1px solid var(--border); background:var(--chip); color:var(--text); font-weight:600; text-align:center;
    }
    .btn.primary{background:var(--accent); color:#062521; border-color:transparent}
    .btn.pay{background:linear-gradient(135deg,#2dd4bf,#22c55e); color:#062521; border:none}
    .empty{
      background:#0f1117; border:1px dashed var(--border); padding:16px; border-radius:12px; color:var(--muted)
    }

    /* Details modal */
    .modal{
      position:fixed; inset:0; display:none; background:rgba(0,0,0,.6); backdrop-filter:saturate(120%) blur(6px); z-index:50;
    }
    .modal.open{display:flex; align-items:flex-end}
    .sheet{
      width:100%; max-width:720px; margin:0 auto; background:var(--card); border-top-left-radius:18px; border-top-right-radius:18px; border:1px solid var(--border);
      max-height:85vh; overflow:auto; box-shadow:var(--shadow);
      animation:slideUp .2s ease-out;
    }
    @keyframes slideUp{from{transform:translateY(20px); opacity:.8} to{transform:translateY(0); opacity:1}}
    .sheet-header{padding:14px 16px; display:flex; gap:12px; align-items:center; border-bottom:1px solid var(--border)}
    .sheet-title{font-weight:700}
    .sheet-close{margin-left:auto; background:#0e1015; border:1px solid var(--border); color:var(--text); padding:8px 10px; border-radius:10px}
    .sheet-body{padding:12px 16px}
    .panel{background:#0f1117; border:1px solid var(--border); padding:12px; border-radius:12px; margin-bottom:10px}
    .panel h4{margin:0 0 8px; font-size:15px}
    .list{display:flex; flex-direction:column; gap:8px}
    .row{display:flex; justify-content:space-between; align-items:center}
    .status{display:inline-flex; gap:8px; align-items:center}
    .pill{padding:6px 10px; border-radius:999px; border:1px solid var(--border); background:#0e1015; font-size:12px}
    .pill.success{background:#062916; border-color:#0e4027; color:#77e3b6}
    .pill.warn{background:#2a1e05; border-color:#3a2a0a; color:#f1c76a}
    .pill.danger{background:#2a0e0e; border-color:#3a1515; color:#ff9c9c}

    /* Bottom nav */
    .nav{
      position:fixed; bottom:0; left:0; right:0; background:var(--card); border-top:1px solid var(--border); padding:8px;
      display:flex; gap:8px; z-index:20;
    }
    .tab{
      flex:1; display:flex; flex-direction:column; align-items:center; gap:6px; padding:8px 6px; border-radius:10px; color:var(--muted);
    }
    .tab.active{background:#0f1117; color:var(--text)}
    .tab .icon{width:22px; height:22px; border-radius:6px; background:#0e1015; border:1px solid var(--border)}

    /* Accessibility helpers */
    button, .btn, .chip, .tab{min-height:var(--touch); touch-action:manipulation}
    .sr-only{position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); border:0}
  </style>
</head>
<body>
  <div class="app" role="application" aria-label="Javesk mobile-first prototype">
    <header>
      <div class="brand" aria-label="Javesk brand">
        <div class="brand-logo">J</div>
        <div>
          <div class="brand-name">Javesk</div>
          <div style="color:var(--muted); font-size:13px">Micro-courses, mentors, jobs ‚Äî built for Ghana</div>
        </div>
      </div>

      <div class="search" role="search">
        <label class="sr-only" for="searchInput">Search courses</label>
        <input id="searchInput" type="search" placeholder="Search title, skill, industry, provider‚Ä¶" aria-label="Search courses">
        <button id="clearSearch" aria-label="Clear search">Clear</button>
      </div>

      <div class="filters" aria-label="Quick filters">
        <button class="chip active" data-filter="industry:all">All industries</button>
        <button class="chip" data-filter="industry:tech">Tech</button>
        <button class="chip" data-filter="industry:renewable">Renewable energy</button>
        <button class="chip" data-filter="industry:agribusiness">Agribusiness</button>
        <button class="chip" data-filter="industry:creative">Creative economy</button>
        <button class="chip" data-filter="level:beginner">Beginner</button>
        <button class="chip" data-filter="level:intermediate">Intermediate</button>
        <button class="chip" data-filter="price:free">Free</button>
        <button class="chip" data-filter="price:premium">Premium</button>
      </div>
    </header>

    <main id="content">
      <!-- Learn tab -->
      <section id="tab-learn" aria-labelledby="learnHeading">
        <h2 id="learnHeading" class="section-title">Recommended micro-courses</h2>
        <div id="coursesGrid" class="grid" role="list"></div>
        <div id="noResults" class="empty" style="display:none" role="status" aria-live="polite">
          No courses match your filters. Try ‚Äúsolar‚Äù, ‚ÄúUI design‚Äù, ‚Äúcassava processing‚Äù, or clear filters.
        </div>
      </section>

      <!-- Mentors tab -->
      <section id="tab-mentors" style="display:none" aria-labelledby="mentorsHeading">
        <h2 id="mentorsHeading" class="section-title">Mentors</h2>
        <div class="grid" id="mentorsGrid"></div>
        <div class="panel">
          <h4>Booking notes</h4>
          <div class="list">
            <div class="row"><span>Calendar integration</span><span class="pill warn">Coming soon</span></div>
            <div class="row"><span>Time zones</span><span class="pill">Africa/Accra</span></div>
            <div class="row"><span>Session reminders</span><span class="pill warn">Planned</span></div>
          </div>
        </div>
      </section>

      <!-- Jobs tab -->
      <section id="tab-jobs" style="display:none" aria-labelledby="jobsHeading">
        <h2 id="jobsHeading" class="section-title">Job board</h2>
        <div class="grid" id="jobsGrid"></div>
        <div class="panel">
          <h4>Sources</h4>
          <div class="list">
            <div class="row"><span>Local boards</span><span class="pill">Aggregated</span></div>
            <div class="row"><span>LinkedIn</span><span class="pill warn">Planned</span></div>
          </div>
        </div>
      </section>

      <!-- Profile tab -->
      <section id="tab-profile" style="display:none" aria-labelledby="profileHeading">
        <h2 id="profileHeading" class="section-title">Profile & settings</h2>
        <div class="panel">
          <h4>Preferences</h4>
          <div class="list">
            <label class="row"><span>Language</span>
              <select id="langSelect" aria-label="Language">
                <option>English</option>
                <option>Twi</option>
                <option>Ga</option>
                <option>Ewe</option>
              </select>
            </label>
            <label class="row"><span>Theme</span>
              <select id="themeSelect" aria-label="Theme">
                <option>Dark</option>
                <option>Light</option>
                <option>High-contrast</option>
              </select>
            </label>
            <div class="row"><span>Goals & interests</span><button class="btn">Edit</button></div>
          </div>
        </div>
        <div class="panel">
          <h4>Certificates</h4>
          <div class="list" id="certsList"></div>
        </div>
      </section>
    </main>

    <!-- Details modal -->
    <div class="modal" id="detailsModal" role="dialog" aria-modal="true" aria-labelledby="detailsTitle">
      <div class="sheet">
        <div class="sheet-header">
          <div class="sheet-title" id="detailsTitle">Course details</div>
          <button class="sheet-close" id="closeDetails" aria-label="Close">Close</button>
        </div>
        <div class="sheet-body" id="detailsBody">
          <!-- Dynamic content -->
        </div>
      </div>
    </div>

    <!-- Payment/status banners -->
    <div id="banner" class="panel" style="position:fixed; left:8px; right:8px; bottom:64px; display:none">
      <div class="row">
        <span id="bannerText">Processing payment‚Ä¶</span>
        <span id="bannerStatus" class="pill">Pending</span>
      </div>
    </div>

    <!-- Bottom nav -->
    <nav class="nav" aria-label="Bottom navigation">
      <button class="tab active" data-tab="learn" aria-label="Learn">
        <span class="icon" aria-hidden="true"></span>
        <span>Learn</span>
      </button>
      <button class="tab" data-tab="mentors" aria-label="Mentors">
        <span class="icon" aria-hidden="true"></span>
        <span>Mentors</span>
      </button>
      <button class="tab" data-tab="jobs" aria-label="Jobs">
        <span class="icon" aria-hidden="true"></span>
        <span>Jobs</span>
      </button>
      <button class="tab" data-tab="profile" aria-label="Profile">
        <span class="icon" aria-hidden="true"></span>
        <span>Profile</span>
      </button>
    </nav>
  </div>

  <script>
    // ---- Mock data models (Firestore/Supabase-style) ----
    const courses = [
      {
        id: 'c1',
        title: 'Intro to Solar PV Installation',
        provider: 'Kwame Nkrumah Energy Lab',
        industry: 'renewable',
        level: 'beginner',
        duration: '6h',
        thumbUrl: '',
        overview: 'Learn practical solar PV basics tailored to Ghanaian households and SMEs.',
        outcomes: ['Site assessment','Panel mounting','Safety basics','Local standards'],
        price: 0,
        tags: ['solar PV', 'energy', 'safety'],
        modules: [
          { id:'m1', courseId:'c1', type:'video', contentUrl:'#', duration:'20m', title:'Why Solar PV?' },
          { id:'m2', courseId:'c1', type:'text', contentUrl:'#', duration:'15m', title:'Safety & Tools' },
          { id:'m3', courseId:'c1', type:'quiz', contentUrl:'#', duration:'10m', title:'Foundations Quiz' },
        ],
        mentors: [
          { id:'me1', name:'Ama', industry:'renewable', bio:'Field technician', availabilitySlots:['Sat 10:00','Sun 15:00'] }
        ],
        certification: { badgeUrl:'#', criteria:'Pass final quiz + complete modules', status:'Eligible' },
        requirements: ['Basic electricity', 'Protective gear'],
        alignment: ['solar PV','installation','safety']
      },
      {
        id: 'c2',
        title: 'UI Design for Mobile Apps',
        provider: 'Accra Design Collective',
        industry: 'tech',
        level: 'intermediate',
        duration: '8h',
        thumbUrl: '',
        overview: 'Create clean, accessible mobile UI with Ghanaian context and patterns.',
        outcomes: ['Wireframes','Color systems','Accessibility','Prototyping'],
        price: 25,
        tags: ['UI design','Figma','accessibility'],
        modules: [
          { id:'m1', courseId:'c2', type:'video', contentUrl:'#', duration:'22m', title:'Intro & Brief' },
          { id:'m2', courseId:'c2', type:'text', contentUrl:'#', duration:'18m', title:'Color & Type' },
          { id:'m3', courseId:'c2', type:'quiz', contentUrl:'#', duration:'12m', title:'Design Quiz' },
        ],
        mentors: [
          { id:'me2', name:'Kojo', industry:'tech', bio:'Product designer', availabilitySlots:['Fri 14:00','Mon 11:00'] }
        ],
        certification: { badgeUrl:'#', criteria:'Portfolio submission + quiz', status:'Locked' },
        requirements: ['Figma basics','Smartphone or laptop'],
        alignment: ['UI design','mobile','accessibility']
      },
      {
        id: 'c3',
        title: 'Cassava Processing for SMEs',
        provider: 'Tamale Agro Hub',
        industry: 'agribusiness',
        level: 'beginner',
        duration: '4h',
        thumbUrl: '',
        overview: 'Process cassava safely for high-demand local products.',
        outcomes: ['Processing flow','Quality control','Packaging','Distribution'],
        price: 0,
        tags: ['cassava processing','food safety'],
        modules: [
          { id:'m1', courseId:'c3', type:'video', contentUrl:'#', duration:'16m', title:'Overview' },
          { id:'m2', courseId:'c3', type:'text', contentUrl:'#', duration:'12m', title:'Quality & Hygiene' },
          { id:'m3', courseId:'c3', type:'quiz', contentUrl:'#', duration:'10m', title:'Safety Quiz' },
        ],
        mentors: [
          { id:'me3', name:'Yaa', industry:'agribusiness', bio:'Food safety consultant', availabilitySlots:['Thu 09:00','Sat 13:00'] }
        ],
        certification: { badgeUrl:'#', criteria:'Complete all modules', status:'Eligible' },
        requirements: ['Basic hygiene','Protective equipment'],
        alignment: ['cassava processing','SME','quality control']
      },
      {
        id: 'c4',
        title: 'Photoshop Basics for Creators',
        provider: 'Cape Coast Creative Studio',
        industry: 'creative',
        level: 'beginner',
        duration: '5h',
        thumbUrl: '',
        overview: 'Edit images and create social content quickly.',
        outcomes: ['Layers','Masks','Color correction','Export'],
        price: 10,
        tags: ['Photoshop','content'],
        modules: [
          { id:'m1', courseId:'c4', type:'video', contentUrl:'#', duration:'19m', title:'Workspace' },
          { id:'m2', courseId:'c4', type:'text', contentUrl:'#', duration:'15m', title:'Layers & Masks' },
          { id:'m3', courseId:'c4', type:'quiz', contentUrl:'#', duration:'10m', title:'Basics Quiz' },
        ],
        mentors: [{ id:'me4', name:'Efua', industry:'creative', bio:'Digital artist', availabilitySlots:['Wed 16:00','Sun 12:00'] }],
        certification: { badgeUrl:'#', criteria:'Complete + pass quiz', status:'Locked' },
        requirements: ['Photoshop app','Internet for downloads'],
        alignment: ['Photoshop','content','design']
      }
    ];

    const jobs = [
      { id:'j1', title:'Junior Solar Technician', company:'PowerLite Ghana', location:'Accra', description:'Assist installations, maintain residential PV systems.', applyUrl:'#', tags:['solar','field'] },
      { id:'j2', title:'UI/UX Intern', company:'FinTech Start-up', location:'Remote (Ghana)', description:'Support mobile app prototyping.', applyUrl:'#', tags:['UI','Figma'] },
      { id:'j3', title:'Food Safety Assistant', company:'AgroFoods Ltd', location:'Tamale', description:'Quality checks in processing line.', applyUrl:'#', tags:['agribusiness','safety'] },
    ];

    const mentors = [
      { id:'me1', name:'Ama', industry:'renewable', bio:'Field technician', availabilitySlots:['Sat 10:00','Sun 15:00'] },
      { id:'me2', name:'Kojo', industry:'tech', bio:'Product designer', availabilitySlots:['Fri 14:00','Mon 11:00'] },
      { id:'me3', name:'Yaa', industry:'agribusiness', bio:'Food safety consultant', availabilitySlots:['Thu 09:00','Sat 13:00'] },
      { id:'me4', name:'Efua', industry:'creative', bio:'Digital artist', availabilitySlots:['Wed 16:00','Sun 12:00'] },
    ];

    const certs = [
      { userId:'u1', courseId:'c1', issuedAt:'2025-10-22', badgeUrl:'#', shareableUrl:'#' }
    ];

    // ---- Core state ----
    const state = {
      searchQuery: '',
      filters: { industry:'all', level:'', price:'' },
      tab: 'learn',
      selectedCourse: null,
      progress: {}, // { [courseId]: { completedModules:[], lastVisited: 'm1' } }
      authUser: { id:'u1', name:'Guest' },
      payments: {}, // { [courseId]: 'pending'|'success'|'failed' }
      offlineQueue: [], // actions to sync
    };

    // ---- Utilities ----
    const $ = sel => document.querySelector(sel);
    const $$ = sel => Array.from(document.querySelectorAll(sel));

    function renderCourses(){
      const grid = $('#coursesGrid');
      grid.innerHTML = '';
      const query = state.searchQuery.trim().toLowerCase();

      const filtered = courses.filter(c=>{
        const indOk = state.filters.industry==='all' || c.industry===state.filters.industry;
        const lvlOk = !state.filters.level || c.level===state.filters.level;
        const priceOk = !state.filters.price || (state.filters.price==='free' ? c.price===0 : c.price>0);
        const matchesQuery = !query || [
          c.title, c.provider, c.industry, c.level, c.tags.join(' '), c.alignment.join(' ')
        ].some(t=>String(t).toLowerCase().includes(query));
        return indOk && lvlOk && priceOk && matchesQuery;
      });

      $('#noResults').style.display = filtered.length ? 'none' : 'block';

      filtered.forEach(c=>{
        const card = document.createElement('article');
        card.className = 'card';
        card.setAttribute('role','listitem');
        card.innerHTML = `
          <div class="thumb" aria-label="${c.title} thumbnail">
            ${c.thumbUrl ? `<img alt="${c.title}" src="${c.thumbUrl}"/>` : `<span style="color:${randomMuted()};font-weight:700">${placeholderIcon(c.industry)}</span>`}
            <span class="badge">${c.duration} ‚Ä¢ ${cap(c.level)}</span>
          </div>
          <div class="card-body">
            <div class="title">${c.title}</div>
            <div class="meta"><span>${c.provider}</span><span>${cap(c.industry)}</span>${c.price===0 ? '<span>Free</span>' : `<span>GHS ${c.price}</span>`}</div>
            <div class="tags">${c.tags.map(t=>`<span class="tag">${t}</span>`).join('')}</div>
            <div class="card-actions">
              <button class="btn primary" data-action="details" data-id="${c.id}" aria-label="View details">View</button>
              ${c.price===0 ? `<button class="btn" data-action="start" data-id="${c.id}" aria-label="Start course">Start</button>`
                : `<button class="btn pay" data-action="pay" data-id="${c.id}" aria-label="Pay with mobile money">Buy (Mobile Money)</button>`}
            </div>
          </div>
        `;
        grid.appendChild(card);
      });
    }

    function renderMentors(){
      const grid = $('#mentorsGrid');
      grid.innerHTML = '';
      mentors.forEach(m=>{
        const card = document.createElement('article');
        card.className = 'card';
        card.innerHTML = `
          <div class="thumb"><span style="color:${randomMuted()};font-weight:700">üë§ ${cap(m.industry)}</span></div>
          <div class="card-body">
            <div class="title">${m.name}</div>
            <div class="meta">${m.bio}</div>
            <div class="tags">${m.availabilitySlots.map(s=>`<span class="tag">${s}</span>`).join('')}</div>
            <div class="card-actions">
              <button class="btn primary" data-action="request-mentor" data-id="${m.id}">Request session</button>
              <button class="btn" data-action="message-mentor" data-id="${m.id}">Message</button>
            </div>
          </div>
        `;
        grid.appendChild(card);
      });
    }

    function renderJobs(){
      const grid = $('#jobsGrid');
      grid.innerHTML = '';
      jobs.forEach(j=>{
        const card = document.createElement('article');
        card.className = 'card';
        card.innerHTML = `
          <div class="thumb"><span style="color:${randomMuted()};font-weight:700">üè¢ ${j.company}</span></div>
          <div class="card-body">
            <div class="title">${j.title}</div>
            <div class="meta"><span>${j.company}</span><span>${j.location}</span></div>
            <div class="tags">${j.tags.map(t=>`<span class="tag">${t}</span>`).join('')}</div>
            <div class="card-actions">
              <button class="btn primary" data-action="job-details" data-id="${j.id}">Details</button>
              <a class="btn" href="${j.applyUrl}" target="_blank" rel="noopener">Apply</a>
            </div>
          </div>
        `;
        grid.appendChild(card);
      });
    }

    function renderCerts(){
      const list = $('#certsList');
      list.innerHTML = '';
      certs.forEach(c=>{
        const course = courses.find(x=>x.id===c.courseId);
        const row = document.createElement('div');
        row.className = 'row';
        row.innerHTML = `
          <span>${course?.title || 'Unknown course'} ‚Äî Issued ${c.issuedAt}</span>
          <span class="status"><button class="btn" data-action="view-cert" data-id="${c.courseId}">View</button><button class="btn" data-action="share-cert" data-id="${c.courseId}">Share</button></span>
        `;
        list.appendChild(row);
      });
      if(!certs.length) list.innerHTML = `<div class="empty">No certificates yet. Complete a course to earn badges.</div>`;
    }

    // ---- Details modal ----
    function openDetails(courseId){
      const c = courses.find(x=>x.id===courseId);
      state.selectedCourse = c;
      const body = $('#detailsBody');
      body.innerHTML = `
        <div class="panel">
          <h4>Overview</h4>
          <p>${c.overview}</p>
          <div class="tags">${c.alignment.map(t=>`<span class="tag">${t}</span>`).join('')}</div>
        </div>
        <div class="panel">
          <h4>Outcomes</h4>
          <div class="list">
            ${c.outcomes.map(o=>`<div>‚Ä¢ ${o}</div>`).join('')}
          </div>
        </div>
        <div class="panel">
          <h4>Modules</h4>
          <div class="list">
            ${c.modules.map(m=>`
              <div class="row">
                <span>${cap(m.type)}: ${m.title} ‚Ä¢ ${m.duration}</span>
                <span class="status"><button class="btn" data-action="play" data-mid="${m.id}" data-cid="${c.id}">Open</button></span>
              </div>
            `).join('')}
          </div>
        </div>
        <div class="panel">
          <h4>Mentor info</h4>
          <div class="list">
            ${c.mentors.map(me=>`<div class="row"><span>${me.name} ‚Äî ${me.bio}</span><span class="status">${me.availabilitySlots.map(s=>`<span class="pill">${s}</span>`).join('')}</span></div>`).join('')}
          </div>
        </div>
        <div class="panel">
          <h4>Certification</h4>
          <div class="row"><span>${c.certification.criteria}</span><span class="pill ${c.certification.status==='Eligible'?'success':'warn'}">${c.certification.status}</span></div>
        </div>
        <div class="panel">
          <h4>Cost</h4>
          <div class="row"><span>${c.price===0 ? 'Free' : 'Premium (Mobile Money paywall)'}</span>${c.price>0 ? '<span class="pill warn">Pay to unlock</span>' : '<span class="pill success">Unlocked</span>'}</div>
        </div>
        <div class="panel">
          <h4>Requirements</h4>
          <div class="list">${c.requirements.map(r=>`<div>‚Ä¢ ${r}</div>`).join('')}</div>
        </div>
        <div class="row" style="gap:8px">
          <button class="btn" data-action="start" data-id="${c.id}">Start</button>
          ${c.price>0 ? `<button class="btn pay" data-action="pay" data-id="${c.id}">Pay with MTN/Vodafone/AirtelTigo</button>`:''}
          <button class="btn" data-action="download" data-id="${c.id}">Download for offline</button>
        </div>
      `;
      $('#detailsModal').classList.add('open');
    }
    function closeDetails(){
      $('#detailsModal').classList.remove('open');
      state.selectedCourse = null;
    }

    // ---- Payment banners ----
    function showBanner(text, status='Pending'){
      const banner = $('#banner');
      $('#bannerText').textContent = text;
      const badge = $('#bannerStatus');
      badge.textContent = status;
      badge.className = 'pill ' + (status==='Success'?'success':status==='Failed'?'danger':'');
      banner.style.display = 'block';
      setTimeout(()=>banner.style.display='none', 3000);
    }

    // ---- Event handlers ----
    $('#searchInput').addEventListener('input', e=>{
      state.searchQuery = e.target.value;
      renderCourses();
    });
    $('#clearSearch').addEventListener('click', ()=>{
      state.searchQuery = '';
      $('#searchInput').value = '';
      renderCourses();
    });

    $$('.filters .chip').forEach(ch=>{
      ch.addEventListener('click', ()=>{
        const val = ch.dataset.filter;
        const [key, value] = val.split(':');
        if(key==='industry') state.filters.industry = value;
        if(key==='level') state.filters.level = value;
        if(key==='price') state.filters.price = value;
        $$('.filters .chip').forEach(c=>c.classList.remove('active'));
        ch.classList.add('active');
        renderCourses();
      });
    });

    // Delegate clicks
    document.body.addEventListener('click', e=>{
      const t = e.target;
      if(t.matches('[data-action="details"]')){
        openDetails(t.dataset.id);
      }
      if(t.matches('#closeDetails')){
        closeDetails();
      }
      if(t.matches('[data-action="start"]')){
        const id = t.dataset.id;
        if(payLocked(id)){ showBanner('Course is premium ‚Äî please complete payment.', 'Failed'); return; }
        showBanner('Starting course‚Ä¶', 'Pending');
        // optimistic progress
        state.progress[id] = state.progress[id] || { completedModules:[], lastVisited:null };
        showBanner('Course started', 'Success');
      }
      if(t.matches('[data-action="download"]')){
        const id = t.dataset.id;
        showBanner('Queued for offline download', 'Pending');
        state.offlineQueue.push({ type:'downloadCourse', id });
        setTimeout(()=>showBanner('Downloaded for offline use', 'Success'), 1200);
      }
      if(t.matches('[data-action="pay"]')){
        const id = t.dataset.id;
        showBanner('Redirecting to Paystack/Flutterwave‚Ä¶', 'Pending');
        // simulate checkout + webhook
        setTimeout(()=>{
          const ok = Math.random()>0.2;
          state.payments[id] = ok ? 'success':'failed';
          showBanner(ok ? 'Payment successful. Premium unlocked!' : 'Payment failed. Try again.', ok ? 'Success' : 'Failed');
          renderCourses();
          if(state.selectedCourse) openDetails(id);
        }, 1500);
      }
      if(t.matches('[data-action="play"]')){
        const cid = t.dataset.cid; const mid = t.dataset.mid;
        if(payLocked(cid)){ showBanner('Locked. Complete payment to access module.', 'Failed'); return; }
        showBanner('Opening module‚Ä¶', 'Pending');
        state.progress[cid] = state.progress[cid] || { completedModules:[], lastVisited:null };
        state.progress[cid].lastVisited = mid;
        // optimistic completion for demo
        const p = state.progress[cid];
        if(!p.completedModules.includes(mid)) p.completedModules.push(mid);
        setTimeout(()=>showBanner('Progress saved', 'Success'), 600);
      }
      if(t.matches('[data-action="request-mentor"]')){
        showBanner('Mentor session requested', 'Success');
      }
      if(t.matches('[data-action="message-mentor"]')){
        showBanner('Opening chat‚Ä¶', 'Pending');
        setTimeout(()=>showBanner('Chat connected', 'Success'), 600);
      }
      if(t.matches('[data-action="job-details"]')){
        const job = jobs.find(j=>j.id===t.dataset.id);
        $('#detailsBody').innerHTML = `
          <div class="panel"><h4>${job.title}</h4><p>${job.description}</p></div>
          <div class="panel"><h4>Location</h4><p>${job.location}</p></div>
          <div class="panel"><h4>Tags</h4><div class="tags">${job.tags.map(x=>`<span class="tag">${x}</span>`).join('')}</div></div>
          <div class="row" style="gap:8px"><a class="btn primary" href="${job.applyUrl}" target="_blank" rel="noopener">Apply</a><button class="btn" id="closeDetails2">Close</button></div>
        `;
        $('#detailsModal').classList.add('open');
      }
      if(t.matches('#closeDetails2')) closeDetails();
      if(t.matches('[data-action="view-cert"]')){
        showBanner('Opening certificate‚Ä¶', 'Pending');
        setTimeout(()=>showBanner('Certificate loaded', 'Success'), 600);
      }
      if(t.matches('[data-action="share-cert"]')){
        showBanner('Share link copied', 'Success');
      }
    });

    // Tabs
    $$('.nav .tab').forEach(tab=>{
      tab.addEventListener('click', ()=>{
        $$('.nav .tab').forEach(t=>t.classList.remove('active'));
        tab.classList.add('active');
        const name = tab.dataset.tab;
        state.tab = name;
        ['learn','mentors','jobs','profile'].forEach(n=>{
          $('#tab-'+n).style.display = n===name ? 'block' : 'none';
        });
      });
    });

    // Helpers
    function cap(s){ return String(s).charAt(0).toUpperCase()+String(s).slice(1); }
    function randomMuted(){ return ['#60a5fa','#a78bfa','#34d399','#f59e0b','#f472b6'][Math.floor(Math.random()*5)]; }
    function placeholderIcon(ind){
      const map = { tech:'</> UI', renewable:'‚òÄÔ∏è Solar', agribusiness:'üåæ Agro', creative:'üé® Creative' };
      return map[ind] || 'üìö Course';
    }
    function payLocked(courseId){
      const c = courses.find(x=>x.id===courseId);
      if(!c || c.price===0) return false;
      return state.payments[courseId]!=='success';
    }

    // Error handling demos
    window.addEventListener('offline', ()=> showBanner('You are offline. Using cached content.', 'Warn'));
    window.addEventListener('online', ()=> showBanner('Back online. Syncing progress‚Ä¶', 'Success'));

    // Initial render
    renderCourses();
    renderMentors();
    renderJobs();
    renderCerts();
  </script>
</body>
</html>
